pipeline{
    
    agent any

environment {
  DOCKER_TAG = getVersion()
}
stages{
    stage('pulling the code'){
        steps{
            git branch: 'main',
            url: 'https://github.com/MalekFarhani/AchatSpringBoot'
}}
    stage('build'){
        steps{ 
            sh 'mvn clean package'
}}
 
}
}
def getVersion()
{
   def commitHash = sh returnStdout: true, script: 'git rev-parse --short  HEAD'
   return commitHash 
}